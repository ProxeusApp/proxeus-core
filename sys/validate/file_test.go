package validate

import (
	"io/ioutil"
	"os"
	"testing"
)

func TestStream(t *testing.T) {
	rf, err := ioutil.TempFile("", "validate_test")
	if err != nil {
		panic(err)
	}
	_, err = rf.Write([]byte(`
	Content...................................
.................................................
........................................................
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
...............................................................
`))
	if err != nil {
		panic(err)
	}
	err = rf.Close()
	if err != nil {
		panic(err)
	}
	rf, err = os.Open(rf.Name())
	if err != nil {
		panic(err)
	}
	rules := Rules{
		"file": Rules{
			"exact": true,
			"kind":  "pdf",
		},
		//"min": "220kb",
		//"max": "300kb",
	}
	_, err = File(rf, rules)
	if err == nil {
		t.Error("expected wrong file type")
	}
}
